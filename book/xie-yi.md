#### Http协议 （超文本传输协议）

应用层 建立在Tcp协议之上

#### HHTTP1.x 的缺点

* ##### 连接无法复用

每次请求都经历三次握手和慢启动

* ##### **Head-Of-Line Blocking（HOLB）**

一系列包因为第一个包被阻塞

* ##### 协议开销大

header 里面携带的内容过大

* ##### 安全因素

明文传输

#### SPDY协议

#### HTTP2.0

基于SPDY3 专注于性能

##### 二进制传输

将请求和响应数据分割为帧 并且采用二进制编码

* 流：流是连接中的一个虚拟信道，可以承载双向的消息；每个流都有一个唯一的整数标识符（1、2…N）；

* 消息：是指逻辑上的 HTTP 消息，比如请求、响应等，由一或多个帧组成。

* 帧：HTTP 2.0 通信的最小单位，每个帧包含帧首部，至少也会标识出当前帧所属的流，承载着特定类型的数据，如 HTTP 首部、负荷，等等

同域名下所有通信都在单个连接上完成 可以承载任意数量的双向数据流 每个流以消息的形式发送 消息又由一个或者多个帧组成 多个帧之间可以乱序发送 根据帧首的流标识可以重新组装

##### 多路复用

解决了浏览器限制同一个域名下的请求数量问题 因为只用一个连接  基于二进制分帧 性能有了很大的提升

* 同一个域名只占用一个连接 消除多个tcp连接带来的延时和内存消耗
* 并行交错的发送多个请求 互不干扰
* 并行交错发送多个响应 互不影响
* 每个请求都可以带31bit的优先值 0代表最高级 数值越大 等级越低 有了优先级 客户端和浏览器就可以在处理不同流的时候采取不同的策略 以最优的方式发送流、消息和帧

##### header 压缩

http使用文本形式传输header 携带cookie 每次都会很大

减少资源消耗 提升性能 采取压缩策略：

* 在客户端和服务端使用“首部表”来跟踪和存储之前法送的键值对 对于相同的数据 不再重复发送
* 在http2连接存续期间始终存在 由客户端和服务端共同渐进的更新
* 每个新的首部键值对要么被追加到末尾 要么替换表中的值

第二个请求只需要发送差异数据 这样可以减少冗余数据 降低开销

##### server push

服务端能通过push的方式客户端需要的内容预先推送过去 

客户端有权利选择接受 或者拒绝 如果已经缓存过可以发送REST\_STREAM帧来拒收 主动推送也遵守同源策略





